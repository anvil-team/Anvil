(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"6a0S":function(e,t,n){e.exports={box:"anvil-search-box__box___16M9-"}},HqXP:function(e,t,n){"use strict";n.r(t);n("+L6B");var a=n("2/Rp"),r=(n("y8nQ"),n("Vl3Y")),o=(n("5NDa"),n("5rEg")),i=n("q1tI"),l=n.n(i),u=n("/MKj"),c=n("bJi6"),s=n.n(c);function f(e){return l.a.createElement("div",{className:s.a["blank-content"]},e.children)}var y=n("6a0S"),d=n.n(y),p=function(e){return l.a.createElement("div",{className:d.a.box},e.children)},m=(n("g9YV"),n("wCAj")),h=(n("P2fV"),n("NJEC")),b=(n("/zsF"),n("PArb")),v=(n("miYZ"),n("tsqr")),g=n("Y+p1"),E=n.n(g);function k(e){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){j(e,t,n[t])})}return e}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=C(t).call(this,e),n=!r||"object"!==k(r)&&"function"!==typeof r?P(a):r,j(P(n),"index",0),j(P(n),"cacheOriginData",{}),j(P(n),"toggleEditable",function(e,t){e.preventDefault();var a=n.state.data.map(function(e){return w({},e)}),r=n.getRowByKey(t,a);r&&(r.editable||(n.cacheOriginData[t]=w({},r)),r.editable=!r.editable,n.setState({data:a}))}),j(P(n),"newMember",function(){var e=n.state.data.map(function(e){return w({},e)});e.push({key:"NEW_TEMP_ID_".concat(n.index),realName:"",username:"",position:"",department:"",roleId:"",editable:!0,isNew:!0}),n.index+=1,n.setState({data:e})}),n.state={data:e.value,loading:!1,value:e.value},n}var n,r,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,i["PureComponent"]),n=t,u=[{key:"getDerivedStateFromProps",value:function(e,t){return E()(e.value,t.value)?null:{data:e.value,value:e.value}}}],(r=[{key:"getRowByKey",value:function(e,t){var n=this.state.data;return(t||n).filter(function(t){return t.key===e})[0]}},{key:"remove",value:function(e){var t=this.state.data,n=this.props.onChange,a=t.filter(function(t){return t.key!==e});this.setState({data:a}),n(a)}},{key:"handleKeyPress",value:function(e,t){"Enter"===e.key&&this.saveRow(e,t)}},{key:"handleFieldChange",value:function(e,t,n){var a=this.state.data.map(function(e){return w({},e)}),r=this.getRowByKey(n,a);r&&(r[t]=e.target.value,this.setState({data:a}))}},{key:"saveRow",value:function(e,t){var n=this;e.persist(),this.setState({loading:!0}),setTimeout(function(){if(n.clickedCancel)n.clickedCancel=!1;else{var a=n.getRowByKey(t)||{};if(!a.realName||!a.username||!a.roleId)return v.a.error("\u8bf7\u586b\u5199\u5b8c\u6574\u6210\u5458\u4fe1\u606f\u3002"),e.target.focus(),void n.setState({loading:!1});delete a.isNew,n.toggleEditable(e,t);var r=n.state.data;(0,n.props.onChange)(r),n.setState({loading:!1})}},500)}},{key:"cancel",value:function(e,t){this.clickedCancel=!0,e.preventDefault();var n=this.state.data.map(function(e){return w({},e)}),a=this.getRowByKey(t,n);this.cacheOriginData[t]&&(Object.assign(a,this.cacheOriginData[t]),delete this.cacheOriginData[t]),a.editable=!1,this.setState({data:n}),this.clickedCancel=!1}},{key:"render",value:function(){var e=this,t=[{title:"\u59d3\u540d",dataIndex:"realName",render:function(t,n){return n.editable?l.a.createElement(o.a,{value:t,autoFocus:!0,onChange:function(t){return e.handleFieldChange(t,"realName",n.key)},onKeyPress:function(t){return e.handleKeyPress(t,n.key)},placeholder:"\u6210\u5458\u59d3\u540d"}):t}},{title:"\u7528\u6237\u540d",dataIndex:"username",render:function(t,n){return n.editable?l.a.createElement(o.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"username",n.key)},onKeyPress:function(t){return e.handleKeyPress(t,n.key)},placeholder:"\u5de5\u53f7"}):t}},{title:"\u90e8\u95e8\u4fe1\u606f",dataIndex:"department",render:function(t,n){return n.editable?l.a.createElement(o.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"department",n.key)},onKeyPress:function(t){return e.handleKeyPress(t,n.key)},placeholder:"\u6240\u5c5e\u90e8\u95e8"}):t}},{title:"\u804c\u4f4d",dataIndex:"position",render:function(t,n){return n.editable?l.a.createElement(o.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"position",n.key)},onKeyPress:function(t){return e.handleKeyPress(t,n.key)}}):t}},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"roleName",render:function(t,n){return n.editable?l.a.createElement(o.a,{value:t,onChange:function(t){return e.handleFieldChange(t,"roleId",n.key)},onKeyPress:function(t){return e.handleKeyPress(t,n.key)}}):t}},{title:"\u64cd\u4f5c",key:"action",render:function(t,n){var a=e.state.loading;return n.editable&&a?null:n.editable?n.isNew?l.a.createElement("span",null,l.a.createElement("a",{onClick:function(t){return e.saveRow(t,n.key)}},"\u6dfb\u52a0"),l.a.createElement(b.a,{type:"vertical"}),l.a.createElement(h.a,{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:function(){return e.remove(n.key)}},l.a.createElement("a",null,"\u5220\u9664"))):l.a.createElement("span",null,l.a.createElement("a",{onClick:function(t){return e.saveRow(t,n.key)}},"\u4fdd\u5b58"),l.a.createElement(b.a,{type:"vertical"}),l.a.createElement("a",{onClick:function(t){return e.cancel(t,n.key)}},"\u53d6\u6d88")):l.a.createElement("span",null,l.a.createElement("a",{onClick:function(t){return e.toggleEditable(t,n.key)}},"\u7f16\u8f91"),l.a.createElement(b.a,{type:"vertical"}),l.a.createElement(h.a,{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:function(){return e.remove(n.key)}},l.a.createElement("a",null,"\u5220\u9664")))}}],n=this.state,r=n.loading,u=n.data;return l.a.createElement(i.Fragment,null,l.a.createElement(m.a,{rowKey:"id",loading:r,columns:t,dataSource:u,pagination:!1}),l.a.createElement(a.a,{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:this.newMember,icon:"plus"},"\u65b0\u589e\u6210\u5458"))}}])&&O(n.prototype,r),u&&O(n,u),t}();function K(e){return(K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return a=this,r=(e=F(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==K(r)&&"function"!==typeof r?D(a):r,I(D(n),"handleTableFormChange",function(e){console.log(e)}),I(D(n),"handleToAddUser",function(){(0,n.props.dispatch)({type:"user/setState",payload:{editVis:!0}})}),n}var n,i,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,l.a.Component),n=t,(i=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"user/fetchUserList"})}},{key:"render",value:function(){var e=this.props,t=e.userState,n=e.form,i=t.userList,u=n.getFieldDecorator;return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null,l.a.createElement(p,null,l.a.createElement(r.a,{layout:"inline"},l.a.createElement(r.a.Item,null,u("keyword")(l.a.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165"}))),l.a.createElement(r.a.Item,null,l.a.createElement(a.a,{type:"primary"},"\u641c\u7d22")))),l.a.createElement(_,{value:i,pagination:!1,onChange:this.handleTableFormChange})))}}])&&x(n.prototype,i),u&&x(n,u),t}();t.default=Object(u.connect)(function(e){return{userState:e.userState}})(r.a.create()(R))}}]);
//# sourceMappingURL=11.5b81d69c.js.map