(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"6a0S":function(e,t,n){e.exports={box:"anvil-search-box__box___16M9-"}},zJBT:function(e,t,n){"use strict";n.r(t);n("+L6B");var a=n("2/Rp"),r=(n("y8nQ"),n("Vl3Y")),o=(n("5NDa"),n("5rEg")),i=n("q1tI"),l=n.n(i),c=n("/MKj"),u=n("bJi6"),s=n.n(u);function d(e){return l.a.createElement("div",{className:s.a["blank-content"]},e.children)}var f=n("6a0S"),p=n.n(f),y=function(e){return l.a.createElement("div",{className:p.a.box},e.children)},m=n("Y+p1"),h=n.n(m),b=(n("g9YV"),n("wCAj")),v=(n("miYZ"),n("tsqr")),g=(n("P2fV"),n("NJEC")),w=(n("/zsF"),n("PArb")),E=(n("OaEy"),n("2fM7"));function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){_(e,t,n[t])})}return e}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=P(t).call(this,e),n=!r||"object"!==O(r)&&"function"!==typeof r?k(a):r,_(k(n),"index",0),_(k(n),"cacheOriginData",{}),_(k(n),"toggleEditable",function(e){return function(t){t.preventDefault();var a=n.state.data.map(function(e){return C({},e)}),r=n.getRowByKey(e,a);r&&(r.editable||(n.cacheOriginData[e]=C({},r)),r.editable=!r.editable,n.setState({data:a}))}}),_(k(n),"newMember",function(){var e=n.state.data.map(function(e){return C({},e)});e.push({id:"NEW_TEMP_ID_".concat(n.index),realName:"",username:"",position:"",department:"",roleId:null,editable:!0,isNew:!0}),n.index+=1,n.setState({data:e})}),_(k(n),"getColumns",function(){var e=n.props.userState.roleList;return[{title:"\u59d3\u540d",width:"15%",dataIndex:"realName",render:function(e,t){return t.editable?l.a.createElement(o.a,{value:e,autoFocus:!0,onChange:n.handleFieldChange("realName",t.id),onKeyPress:n.handleKeyPress(t.id),placeholder:"\u6210\u5458\u59d3\u540d"}):e}},{title:"\u7528\u6237\u540d",width:"15%",dataIndex:"username",render:function(e,t){return t.editable?l.a.createElement(o.a,{value:e,onChange:n.handleFieldChange("username",t.id),onKeyPress:n.handleKeyPress(t.id),placeholder:"\u5de5\u53f7"}):e}},{title:"\u90e8\u95e8\u4fe1\u606f",width:"20%",dataIndex:"department",render:function(e,t){return t.editable?l.a.createElement(o.a,{value:e,onChange:n.handleFieldChange("department",t.id),onKeyPress:n.handleKeyPress(t.id),placeholder:"\u6240\u5c5e\u90e8\u95e8"}):e}},{title:"\u804c\u4f4d",width:"15%",dataIndex:"position",render:function(e,t){return t.editable?l.a.createElement(o.a,{placeholder:"\u804c\u4f4d",value:e,onChange:n.handleFieldChange("position",t.id),onKeyPress:n.handleKeyPress(t.id)}):e}},{title:"\u89d2\u8272\u540d\u79f0",width:"15%",dataIndex:"roleName",render:function(t,a){return a.editable?l.a.createElement(E.a,{placeholder:"\u9009\u62e9\u89d2\u8272",style:{width:"100%"},value:a.roleId,onChange:n.handleFieldChange("roleId",a.id),onKeyPress:n.handleKeyPress(a.id)},e.map(function(e){return l.a.createElement(E.a.Option,{key:e.id,value:e.id},e.roleName)})):t}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){var a=n.state.loading;return t.editable&&a?null:t.editable?t.isNew?l.a.createElement("span",null,l.a.createElement("a",{onClick:n.handleSaveRow(t.id)},"\u6dfb\u52a0"),l.a.createElement(w.a,{type:"vertical"}),l.a.createElement(g.a,{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:n.handleRemove(t.id)},l.a.createElement("a",null,"\u5220\u9664"))):l.a.createElement("span",null,l.a.createElement("a",{onClick:n.handleSaveRow(t.id)},"\u4fdd\u5b58"),l.a.createElement(w.a,{type:"vertical"}),l.a.createElement("a",{onClick:n.handleCancel(t.id)},"\u53d6\u6d88")):l.a.createElement("span",null,l.a.createElement("a",{onClick:n.toggleEditable(t.id)},"\u7f16\u8f91"),l.a.createElement(w.a,{type:"vertical"}),l.a.createElement("a",{onClick:n.handleToDistributionProject(t)},"\u5206\u914d\u9879\u76ee"),l.a.createElement(w.a,{type:"vertical"}),l.a.createElement(g.a,{title:"\u662f\u5426\u8981\u5220\u9664\u6b64\u884c\uff1f",onConfirm:n.handleRemove(t.id)},l.a.createElement("a",null,"\u5220\u9664")))}}]}),_(k(n),"handleToDistributionProject",function(e){return function(){(0,n.props.dispatch)({type:"user/setUserVis",payload:{data:{distributionVis:!0,userNow:e}}})}}),n.state={data:e.value,loading:!1,value:e.value},n}var n,r,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,i["PureComponent"]),n=t,c=[{key:"getDerivedStateFromProps",value:function(e,t){return h()(e.value,t.value)?null:{data:e.value,value:e.value}}}],(r=[{key:"getRowByKey",value:function(e,t){var n=this.state.data;return(t||n).filter(function(t){return t.id===e})[0]}},{key:"handleRemove",value:function(e){var t=this;return function(){var n=t.state.data,a=t.props.onChange,r=n.filter(function(t){return t.id!==e});t.setState({data:r}),a(r)}}},{key:"handleKeyPress",value:function(e){var t=this;return function(n){"Enter"===n.key&&t.handleSaveRow(n,e)}}},{key:"handleFieldChange",value:function(e,t){var n=this;return function(a){var r=n.state.data.map(function(e){return C({},e)}),o=n.getRowByKey(t,r);o&&(a.target?(o[e]=a.target.value,n.setState({data:r})):(o[e]=a,n.setState({data:r})))}}},{key:"handleSaveRow",value:function(e){var t=this;return function(n){n.persist(),t.setState({loading:!0}),setTimeout(function(){if(t.clickedCancel)t.clickedCancel=!1;else{var a=t.getRowByKey(e)||{};if(!a.realName||!a.username||!a.roleId)return v.a.error("\u8bf7\u586b\u5199\u5b8c\u6574\u6210\u5458\u4fe1\u606f\u3002"),n.target.focus(),void t.setState({loading:!1});delete a.isNew,t.toggleEditable(n,e);var r=t.state.data;(0,t.props.onChange)(r),t.setState({loading:!1})}},500)}}},{key:"handleCancel",value:function(e){var t=this;return function(n){t.clickedCancel=!0,n.preventDefault();var a=t.state.data.map(function(e){return C({},e)}),r=t.getRowByKey(e,a);t.cacheOriginData[e]&&(Object.assign(r,t.cacheOriginData[e]),delete t.cacheOriginData[e]),r.editable=!1,t.setState({data:a}),t.clickedCancel=!1}}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.data;return l.a.createElement(i.Fragment,null,l.a.createElement(b.a,{rowKey:"id",loading:t,columns:this.getColumns(),dataSource:n,pagination:!1}),l.a.createElement(a.a,{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:this.newMember,icon:"plus"},"\u65b0\u589e\u6210\u5458"))}}])&&S(n.prototype,r),c&&S(n,c),t}(),R=Object(c.connect)(function(e){return{userState:e.userState}})(K);function x(e){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){var e,n,a,r,o,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,u=new Array(c),s=0;s<c;s++)u[s]=arguments[s];return a=this,n=!(r=(e=N(t)).call.apply(e,[this].concat(u)))||"object"!==x(r)&&"function"!==typeof r?F(a):r,o=F(n),l=function(e){console.log(e)},(i="handleTableFormChange")in o?Object.defineProperty(o,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[i]=l,n}var n,i,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,l.a.Component),n=t,(i=[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"user/fetchUserList"}),e({type:"user/fetchRoleList"})}},{key:"render",value:function(){var e=this.props,t=e.userState,n=e.form,i=t.userList,c=n.getFieldDecorator;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d,null,l.a.createElement(y,null,l.a.createElement(r.a,{layout:"inline"},l.a.createElement(r.a.Item,null,c("keyword")(l.a.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165"}))),l.a.createElement(r.a.Item,null,l.a.createElement(a.a,{type:"primary"},"\u641c\u7d22")))),l.a.createElement(R,{value:i,pagination:!1,onChange:this.handleTableFormChange})))}}])&&D(n.prototype,i),c&&D(n,c),t}();t.default=Object(c.connect)(function(e){return{userState:e.userState}})(r.a.create()(T))}}]);
//# sourceMappingURL=11.718881ef.js.map